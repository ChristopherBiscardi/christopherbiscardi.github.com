import React from "react";
import { graphql, Link } from "gatsby";
import { Styled } from "theme-ui";
import Layout from "gatsby-theme-blog/src/components/layout";

export default ({ location, ...props }) => {
  const images = props.data.images.group;

  return (
    <Layout location={location} title="Browse by Tags">
      <Styled.h1>Open Graph Images</Styled.h1>
      {images.map(({ component, nodes }) => {
        return (
          <div>
            <h2>
              generated by <code>{component}</code>
            </h2>

            <ul
              css={{
                display: "flex",
                listStyleType: "none",
                flexWrap: "wrap",
                marginBottom: "4rem"
              }}
            >
              {nodes.map(({ outputDir, fileName }) => (
                <li>
                  <img
                    src={`/${outputDir}/${fileName}.png`}
                    css={{
                      display: "flex",
                      maxWidth: "105px"
                    }}
                  />
                </li>
              ))}
            </ul>
          </div>
        );
      })}
    </Layout>
  );
};

export const query = graphql`
  query AllOpenGraphImagesQuery {
    images: allPrinter {
      group(field: component) {
        component: fieldValue
        nodes {
          outputDir
          fileName
        }
      }
    }
  }
`;
